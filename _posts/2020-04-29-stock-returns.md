---
title: "Stock returns"
date: 2020-04-30T15:34:30-04:00
categories:
  - blog
tags:
  - building trading strategy
  - finance
---

II. calculations/adjustments
1. OHLC
2. resampling
3. Filling gaps in market data
4. Distribution of prices and returns

# Stock returns
Stock returns are calculated as r = (Pt - Pt-1)/Pt-1
log return or natural log return R = ln(Pt/Pt-1)
If the value of r is small (|r| <<1 , ln(r+1) ~ r

# why log returns?
* Log returns are great for compounding:
$100 grows to $100 (1 + .04/252)^252 = 104.08 at 4% interest compounded daily
which is close to $100 x e^0.04 = $104.08
log returns are also continuosly compounded returns.


* Numerical stability:

'''ruby
np.prod(1/np.array(range(1,1000))) #gives 0.0
sum(np.log(1/np.array(range(1,1000)))) #gives -5905.2204..
'''

''' ruby
def print_hi(name)
  puts "Hi, #{name}"
end
print_hi('Tom')
'''

* Additive:
Products turn to addition problem in log, which is easier for computing purposes. Also, product of two normally distributed variables is not normal, whereas the addition of two normally distributed variables also result in a normally distributed variable.


* Normally distributed:
log returns of a stock can reasonably be considered as normally distributed as long as they are identically and independantly distributed

# survivor bias

While analyzing stock performance / stock market performance, we should always include the stocks that were existing at the start time of the duration of our analysis. for example, if we are analyzing the stock market performance for the last 20 years, we should go back to the year 2000, find out the list of stocks that were listed in 2000 and calculate returns generated by them in the past 20 years. If we calculate the 20 years returns for the stock list today, it might not give us an accurate picture as it will not include the stocks that were trading 20 years ago, but are no longer in existence today. It will only include robust companies like Amazon which made it and not consider 100s of other companies that couldn't. 

# Calculations and adjustments to stock data


